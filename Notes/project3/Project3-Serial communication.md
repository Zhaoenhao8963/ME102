# Serial communication

## 串口通信

###  通讯协议：

#### RS-232物理层

![img](https://pic2.zhimg.com/80/v2-35b435b2fea5546596b1dc0b2bdac5fd_hd.png)

​      每个设备都有一个[DB9](https://link.zhihu.com/?target=http%3A//baike.baidu.com/link%3Furl%3DcVf7HODanbmz2bHFSCH_WSytyGYg5FoNTuaRtUE-yOhKqO1tnAasyDBX5XHneQCx57uh1c8sYWn-3Eai6B_TCq%231)接口，通过DB9接口连接RS-232标准的串口线进行数据传输。由于通过RS-232标准传输的电平信号到达设备后，不能直接被识别，所以会通过电平转换芯片（例如MAX3232、SP3232芯片等）转换成能识别的[TTL](https://link.zhihu.com/?target=http%3A//baike.baidu.com/view/1051553.htm)电平信号，实现通讯

​      相互通讯的两个设备间，一个设备发送数据，一个设备接收数据。一般情况下，发送数据的设备称为DTE，如计算机；接收数据的设备称为DCE，如调制解调器

![img](https://pic1.zhimg.com/80/v2-ff4ef1e4ea8173bd6e52a1d6250d7400_hd.png)

- RXD：用于接收DCE发来的数据信号，即输入
- TXD：用于发送DTE的信号，即输出。公头和母头的RXD和TXD应交叉连接
- GND：用于平衡设备双方的地电位，即共地

#### 协议层

协议层规定了数据包的内容，内容包含了**起始位**、**主体数据**、**校验位**及**停止位**

![img](https://pic4.zhimg.com/80/v2-5c7a987838d630646c0b1bd188ab5ecf_hd.png)

## 波特率

### 定义

串口异步通讯中由于没有时钟信号，所以通讯双方需要约定好波特率，即每个码元的长度，以便对信号进行解码。常见的波特率有4800、9600、115200等

### 起始位、停止位

数据包从起始位开始，到停止位结束。起始信号用逻辑0的数据位表示，停止信号由0.5、1、1.5或2个逻辑1的数据位表示，只要双方约定一致即可

### 数据校验

- 奇校验：要求有效数据和校验位中“1”的个数为奇数，比如一个8位长的有效数据为：01101001，此时共有4个“1”，为达到奇校验效果，校验位为“1”，最后传输的是8位有效数据加1位校验位，共9位
- 偶校验：有效数据和校验位的“1”数量为偶数，则此时为达到偶校验效果，校验位为“0”
- 0校验：无论有效数据中是什么数据内容，校验位总是为“0”
- 1校验：校验位总是为“1”

## 全双工&半双工

### 全双工

​       当数据的发送和接收分流,分别由两根不同的传输线传送时,通信双方都能在同一时刻进行发送和接收操作,这样的传送方式就是全双工制.在全双工方式下,通信系统的每一端都设置了发送器和接收器,因此,能控制数据同时在两个方向上传送.全双工方式无需进行方向的切换,因此,没有切换操作所产生的时间延迟

### 半双工

​       若使用**同一根传输线**既作接收又作发送,虽然数据可以在两个方向上传送,但通信双方不能同时收发数据,这样的传送方式就是半双工制.采用半双工方式时,通信系统每一端的发送器和接收器,通过收 / 发开关转接到通信线上,进行方向的切换,因此,会产生时间延迟

## 应用

把DL-22串口的RXD与另一个的TXD，TXD与另一个的RXD交叉连接，实现全双工连接，使双方实现发送与接收同时进行。

